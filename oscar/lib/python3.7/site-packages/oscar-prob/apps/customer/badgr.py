import json
import requests
from django.conf import settings


host = settings.BADGR['HOST']
port = settings.BADGR['PORT']


def create_badge_user(email, first_name, last_name, password):
    header = {'accept': 'application/json', 'Content-Type': 'application/json'}  
    endpoint = host + ":" + port 
    connection = None
    
    json_model = {
       "agreed_terms_version": "0",
        "did": True,
        "email": email,
        "first_name": first_name,
        "has_password_set": True,
        "is_staff": False,
        "last_name": last_name,
        "marketing_opt_in": False,
        "password": password,
        "slug": "L5_na2sxRhe4wcHNM6H7YQ",
        "telephone": [],
        "token": True,
        "url": []
    }
    
    try:
        response = requests.post(
            endpoint
            + "/v1/user/profile",
            json.dumps(json_model),
            headers=header
        )
        response.raise_for_status()
        connection = response.json()
                        
    except:
        raise    
    finally:             
        return connection